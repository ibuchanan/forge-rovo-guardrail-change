app:
  id: ari:cloud:ecosystem::app/fbad7f54-8bdf-455b-bf29-6f7482da2f45
  runtime:
    architecture: arm64
    memoryMB: 256
    name: nodejs22.x
modules:
  rovo:agent:
    - key: forge-rovo-guardrail-change
      name: ITSM Change Guardrail
      description: An agent for assessing the change type of a JSM Change Request
      actions:
        - log-assessment
        - fetch-change-content
      conversationStarters:
        - Assess the quality of this change request
      prompt: resource:agent-prompts;agent-instructions.md
  action:
    - key: log-assessment
      name: Log an assessment result
      description: >
        When the agent performs assessment,
        this action logs the result to the Forge logs.
      actionVerb: GET
      function: logAssessment
      inputs:
        assessment:
          title: Assessment
          description: >
            The assessment that the has been performed on an issue
          required: true
          type: string
    - key: fetch-change-content
      name: Fetch content from issue
      description: >
        For a given issue key,
        extract default fields for Change requests
        as content
      actionVerb: GET
      function: fetchContentFromChange
      inputs:
        issue:
          title: Issue Key
          type: string
          description: issue key to extract
          required: true
  trigger:
    - key: trigger-lifecycle
      events:
        - avi:forge:installed:app
        - avi:forge:upgraded:app
      function: lifecycle-handler
  webtrigger:
    - key: dev-trigger
      function: trigger
      response:
        type: dynamic
  function:
    - key: messageLogger
      handler: index.messageLogger
    - key: trigger
      handler: index.trigger
    - key: lifecycle-handler
      handler: index.lifecycle
    - key: fetchContentFromChange
      handler: index.fetchContentFromChange
resources:
  - key: agent-prompts
    path: prompts
permissions:
  scopes:
    - read:jira-work
    - read:chat:rovo
